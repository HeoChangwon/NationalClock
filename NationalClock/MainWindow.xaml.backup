<Window x:Class="NationalClock.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:NationalClock"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="{Binding WindowTitle, FallbackValue='National Clock'}" 
        Height="600" Width="900" MinHeight="400" MinWidth="600"
        Background="{DynamicResource MaterialDesignPaper}"
        Topmost="{Binding IsAlwaysOnTop}"
        WindowStartupLocation="Manual"
        Icon="pack://application:,,,/Resources/NationalClock.ico">
    
    <Window.Resources>
        <!-- Clock Item DataTemplate with Enhanced Colors -->
        <DataTemplate x:Key="ClockItemTemplate">
            <materialDesign:Card Margin="8" Padding="16" materialDesign:ElevationAssist.Elevation="Dp2"
                               Background="{DynamicResource MaterialDesignCardBackground}">
                <materialDesign:Card.Style>
                    <Style TargetType="materialDesign:Card" BasedOn="{StaticResource MaterialDesignCard}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4"/>
                                <Setter Property="Background" Value="{DynamicResource Primary50}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </materialDesign:Card.Style>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Flag/Emoji with enhanced background -->
                    <Border Grid.Column="0" Background="{DynamicResource PrimaryHueLightBrush}" 
                            CornerRadius="20" Width="40" Height="40" 
                            VerticalAlignment="Center" Margin="0,0,16,0">
                        <TextBlock Text="{Binding TimeZone.FlagEmoji}" 
                                   FontSize="24" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Border>
                    
                    <!-- Clock Info with enhanced styling -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding TimeZone.DisplayName}" 
                                   FontSize="18" FontWeight="SemiBold" Margin="0,0,0,4"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <TextBlock Text="{Binding FormattedTime}" 
                                   FontSize="28" FontWeight="Bold" 
                                   Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                        <TextBlock Text="{Binding DateString}" 
                                   FontSize="14" Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    </StackPanel>
                    
                    <!-- Accent Indicator -->
                    <Border Grid.Column="2" Width="4" Height="60" 
                            Background="{DynamicResource SecondaryHueMidBrush}"
                            CornerRadius="2" VerticalAlignment="Center"/>
                </Grid>
            </materialDesign:Card>
        </DataTemplate>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Enhanced Header with Gradient -->
        <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryDark" Padding="16" 
                                materialDesign:ElevationAssist.Elevation="Dp4">
            <materialDesign:ColorZone.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="{DynamicResource Primary600}" Offset="0"/>
                    <GradientStop Color="{DynamicResource Primary400}" Offset="1"/>
                </LinearGradientBrush>
            </materialDesign:ColorZone.Background>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- App Icon -->
                <materialDesign:PackIcon Grid.Column="0" Kind="ClockOutline" 
                                       Width="28" Height="28" 
                                       Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}"
                                       VerticalAlignment="Center" Margin="0,0,12,0"/>
                
                <TextBlock Grid.Column="1" Text="{Binding ClientTitle}" 
                          FontSize="22" FontWeight="Medium"
                          Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" 
                          VerticalAlignment="Center"/>
                
                <!-- Enhanced Control Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Command="{Binding ToggleFormatCommand}" 
                           Margin="4" Padding="8" ToolTip="Toggle 12H/24H Format"
                           Background="Transparent" BorderThickness="0"
                           Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ClockTimeEight" Width="16" Height="16" Margin="0,0,4,0"/>
                            <TextBlock Text="Format" FontSize="12"/>
                        </StackPanel>
                    </Button>
                    <Button Command="{Binding ToggleThemeCommand}" 
                           Margin="4" Padding="8" ToolTip="Toggle Dark/Light Theme"
                           Background="Transparent" BorderThickness="0"
                           Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ThemeLightDark" Width="16" Height="16" Margin="0,0,4,0"/>
                            <TextBlock Text="Theme" FontSize="12"/>
                        </StackPanel>
                    </Button>
                    <Button Command="{Binding OpenSettingsCommand}" 
                           Margin="4" Padding="8" ToolTip="Open Settings"
                           Background="Transparent" BorderThickness="0"
                           Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Settings" Width="16" Height="16" Margin="0,0,4,0"/>
                            <TextBlock Text="Settings" FontSize="12"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>
        
        <!-- Clock List -->
        <ScrollViewer Grid.Row="1" Margin="16">
            <ItemsControl ItemsSource="{Binding Clocks}"
                         ItemTemplate="{StaticResource ClockItemTemplate}">
            </ItemsControl>
        </ScrollViewer>
        
        <!-- Enhanced Status Bar -->
        <materialDesign:ColorZone Grid.Row="2" Mode="PrimaryLight" Padding="16,8"
                                materialDesign:ElevationAssist.Elevation="Dp1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Earth" Width="16" Height="16" 
                                           Foreground="{DynamicResource PrimaryHueMidBrush}" 
                                           Margin="0,0,8,0"/>
                    <TextBlock Text="National Clock - Multi-timezone World Clock" 
                              FontSize="12" Foreground="{DynamicResource MaterialDesignBody}"
                              VerticalAlignment="Center"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Update" Width="14" Height="14" 
                                           Foreground="{DynamicResource SecondaryHueMidBrush}"
                                           Margin="0,0,4,0"/>
                    <TextBlock Text="Live Updates" 
                              FontSize="11" FontStyle="Italic"
                              Foreground="{DynamicResource SecondaryHueMidBrush}"/>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>
    </Grid>
</Window>